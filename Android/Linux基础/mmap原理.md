##### 内存映射种类

* 私有映射：内存段为调用进程所私有。对该内存段的修改不会反映到映射文件

* 共享型内存映射：进程间共享内存，对该内存段修改反映到映射文件中

  ##### mmap基本原理

* 进程的虚拟地址线性区和磁盘块设备文件关联，达到线性区某页的访问，转换成对块设备的字节操作。
* 和传统读写比较，传统RW需要先进入内核态使用页缓存机制和页中断机制，通过块设备数据复制到页缓存（内核缓存），再从页缓存到用户态物理内存缓存，两次复制；而mmap通过进程调用mmap函数（当前进程的虚拟地址空间中，寻找一段空闲的满足要求的连续的虚拟地址）和内核调用mmap建立映射后，通过异常中断，只会从块设备复制一次数据到主存，而这个主存只有有映射关系的所有进程都可以访问，跳过了页缓存机制，少了内核复制到用户态的复制过程。所以已经建立好映射的进程访问已经复制到主存的映射数据，一次拷贝都不需要。

